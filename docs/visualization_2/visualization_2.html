<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Principles and Techniques of Data Science - 8&nbsp; Visualization II</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../sampling/sampling.html" rel="next">
<link href="../visualization_1/visualization_1.html" rel="prev">
<link href="../data100_logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Visualization II</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../data100_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Principles and Techniques of Data Science</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/DS-100/course-notes" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="../Principles-and-Techniques-of-Data-Science.pdf" title="Download PDF" class="sidebar-tool px-1"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro_lec/introduction.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pandas_1/pandas_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Pandas I</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pandas_2/pandas_2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Pandas II</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pandas_3/pandas_3.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Pandas III</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../eda/eda.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Cleaning and EDA</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../regex/regex.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Regular Expressions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../visualization_1/visualization_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Visualization I</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../visualization_2/visualization_2.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Visualization II</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sampling/sampling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Sampling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro_to_modeling/intro_to_modeling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Introduction to Modeling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../constant_model_loss_transformations/loss_transformations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Constant Model, Loss, and Transformations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ols/ols.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Ordinary Least Squares</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../gradient_descent/gradient_descent.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Gradient Descent</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../feature_engineering/feature_engineering.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Feature Engineering</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cv_regularization/cv_reg.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Cross Validation and Regularization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../probability_1/probability_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Random Variables</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../probability_2/probability_2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Estimators, Bias, and Variance</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../case_study_HCE/case_study_HCE.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Case Study in Human Contexts and Ethics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../case_study_climate/case_study_climate.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Case Study in Climate and Physical Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../inference_causality/inference_causality.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Bias, Variance, and Inference</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sql_I/sql_I.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">SQL I</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sql_II/sql_II.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">SQL II</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../logistic_regression_1/logistic_reg_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Logistic Regression I</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../logistic_regression_2/logistic_reg_2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Logistic Regression II</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pca_1/pca_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">PCA I</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pca_2/pca_2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">PCA II</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../clustering/clustering.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Clustering</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#kernel-density-functions" id="toc-kernel-density-functions" class="nav-link active" data-scroll-target="#kernel-density-functions"><span class="toc-section-number">8.1</span>  Kernel Density Functions</a>
  <ul>
  <li><a href="#kde-mechanics" id="toc-kde-mechanics" class="nav-link" data-scroll-target="#kde-mechanics"><span class="toc-section-number">8.1.1</span>  KDE Mechanics</a>
  <ul>
  <li><a href="#smoothing" id="toc-smoothing" class="nav-link" data-scroll-target="#smoothing"><span class="toc-section-number">8.1.1.1</span>  Smoothing</a></li>
  <li><a href="#kernel-density-estimation" id="toc-kernel-density-estimation" class="nav-link" data-scroll-target="#kernel-density-estimation"><span class="toc-section-number">8.1.1.2</span>  Kernel Density Estimation</a>
  <ul class="collapse">
  <li><a href="#step-1---place-a-kernel-at-each-data-point" id="toc-step-1---place-a-kernel-at-each-data-point" class="nav-link" data-scroll-target="#step-1---place-a-kernel-at-each-data-point"><span class="toc-section-number">8.1.1.2.1</span>  Step 1 - Place a Kernel at Each Data Point</a></li>
  <li><a href="#step-2---normalize-kernels-to-have-total-area-of-1" id="toc-step-2---normalize-kernels-to-have-total-area-of-1" class="nav-link" data-scroll-target="#step-2---normalize-kernels-to-have-total-area-of-1"><span class="toc-section-number">8.1.1.2.2</span>  Step 2 - Normalize Kernels to Have Total Area of 1</a></li>
  <li><a href="#step-3---sum-kernels-together" id="toc-step-3---sum-kernels-together" class="nav-link" data-scroll-target="#step-3---sum-kernels-together"><span class="toc-section-number">8.1.1.2.3</span>  Step 3 - Sum Kernels Together</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#kernel-functions-and-bandwidth" id="toc-kernel-functions-and-bandwidth" class="nav-link" data-scroll-target="#kernel-functions-and-bandwidth"><span class="toc-section-number">8.1.2</span>  Kernel Functions and Bandwidth</a>
  <ul>
  <li><a href="#kernels" id="toc-kernels" class="nav-link" data-scroll-target="#kernels"><span class="toc-section-number">8.1.2.1</span>  Kernels</a>
  <ul class="collapse">
  <li><a href="#gaussian-kernel" id="toc-gaussian-kernel" class="nav-link" data-scroll-target="#gaussian-kernel"><span class="toc-section-number">8.1.2.1.1</span>  Gaussian Kernel</a></li>
  <li><a href="#boxcar-kernel" id="toc-boxcar-kernel" class="nav-link" data-scroll-target="#boxcar-kernel"><span class="toc-section-number">8.1.2.1.2</span>  Boxcar Kernel</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#relationships-between-quantitative-variables" id="toc-relationships-between-quantitative-variables" class="nav-link" data-scroll-target="#relationships-between-quantitative-variables"><span class="toc-section-number">8.1.3</span>  Relationships Between Quantitative Variables</a>
  <ul>
  <li><a href="#scatter-plots" id="toc-scatter-plots" class="nav-link" data-scroll-target="#scatter-plots"><span class="toc-section-number">8.1.3.1</span>  Scatter Plots</a></li>
  </ul></li>
  <li><a href="#overplotting" id="toc-overplotting" class="nav-link" data-scroll-target="#overplotting"><span class="toc-section-number">8.1.4</span>  Overplotting</a>
  <ul>
  <li><a href="#hex-plots-and-contour-plots" id="toc-hex-plots-and-contour-plots" class="nav-link" data-scroll-target="#hex-plots-and-contour-plots"><span class="toc-section-number">8.1.4.1</span>  Hex Plots and Contour Plots</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#transformations" id="toc-transformations" class="nav-link" data-scroll-target="#transformations"><span class="toc-section-number">8.2</span>  Transformations</a>
  <ul>
  <li><a href="#transforming-a-distribution" id="toc-transforming-a-distribution" class="nav-link" data-scroll-target="#transforming-a-distribution"><span class="toc-section-number">8.2.0.1</span>  Transforming a Distribution</a></li>
  <li><a href="#linearizing-a-relationship" id="toc-linearizing-a-relationship" class="nav-link" data-scroll-target="#linearizing-a-relationship"><span class="toc-section-number">8.2.0.2</span>  Linearizing a Relationship</a></li>
  <li><a href="#additional-remarks" id="toc-additional-remarks" class="nav-link" data-scroll-target="#additional-remarks"><span class="toc-section-number">8.2.0.3</span>  Additional Remarks</a></li>
  </ul></li>
  <li><a href="#visualization-theory" id="toc-visualization-theory" class="nav-link" data-scroll-target="#visualization-theory"><span class="toc-section-number">8.3</span>  Visualization Theory</a>
  <ul>
  <li><a href="#information-channels" id="toc-information-channels" class="nav-link" data-scroll-target="#information-channels"><span class="toc-section-number">8.3.1</span>  Information Channels</a>
  <ul>
  <li><a href="#encodings-in-rugplots" id="toc-encodings-in-rugplots" class="nav-link" data-scroll-target="#encodings-in-rugplots"><span class="toc-section-number">8.3.1.1</span>  Encodings in Rugplots</a></li>
  <li><a href="#multi-dimensional-encodings" id="toc-multi-dimensional-encodings" class="nav-link" data-scroll-target="#multi-dimensional-encodings"><span class="toc-section-number">8.3.1.2</span>  Multi-Dimensional Encodings</a></li>
  </ul></li>
  <li><a href="#harnessing-the-axes" id="toc-harnessing-the-axes" class="nav-link" data-scroll-target="#harnessing-the-axes"><span class="toc-section-number">8.3.2</span>  Harnessing the Axes</a>
  <ul>
  <li><a href="#consider-scale-of-the-data" id="toc-consider-scale-of-the-data" class="nav-link" data-scroll-target="#consider-scale-of-the-data"><span class="toc-section-number">8.3.2.1</span>  Consider Scale of the Data</a></li>
  <li><a href="#reveal-the-data" id="toc-reveal-the-data" class="nav-link" data-scroll-target="#reveal-the-data"><span class="toc-section-number">8.3.2.2</span>  Reveal the Data</a></li>
  </ul></li>
  <li><a href="#harnessing-color" id="toc-harnessing-color" class="nav-link" data-scroll-target="#harnessing-color"><span class="toc-section-number">8.3.3</span>  Harnessing Color</a>
  <ul>
  <li><a href="#colormaps" id="toc-colormaps" class="nav-link" data-scroll-target="#colormaps"><span class="toc-section-number">8.3.3.1</span>  Colormaps</a></li>
  </ul></li>
  <li><a href="#harnessing-markings" id="toc-harnessing-markings" class="nav-link" data-scroll-target="#harnessing-markings"><span class="toc-section-number">8.3.4</span>  Harnessing Markings</a></li>
  <li><a href="#harnessing-conditioning" id="toc-harnessing-conditioning" class="nav-link" data-scroll-target="#harnessing-conditioning"><span class="toc-section-number">8.3.5</span>  Harnessing Conditioning</a></li>
  <li><a href="#harnessing-context" id="toc-harnessing-context" class="nav-link" data-scroll-target="#harnessing-context"><span class="toc-section-number">8.3.6</span>  Harnessing Context</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Visualization II</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="callout-note callout callout-style-default no-icon callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Learning Outcomes
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>Use KDE for estimating density curve.</li>
<li>Using transformations to analyze the relationship between two variables.</li>
<li>Evalauting quality of a visualization based on visualization theory concepts.</li>
</ul>
</div>
</div>
</div>
<section id="kernel-density-functions" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="kernel-density-functions"><span class="header-section-number">8.1</span> Kernel Density Functions</h2>
<section id="kde-mechanics" class="level3" data-number="8.1.1">
<h3 data-number="8.1.1" class="anchored" data-anchor-id="kde-mechanics"><span class="header-section-number">8.1.1</span> KDE Mechanics</h3>
<p>In the last lecture, we learned that density curves are smooth, continuous functions that represent a distribution of values. In this section, we’ll learn how to construct density curves using Kernel Density Estimation (KDE).</p>
<section id="smoothing" class="level4" data-number="8.1.1.1">
<h4 data-number="8.1.1.1" class="anchored" data-anchor-id="smoothing"><span class="header-section-number">8.1.1.1</span> Smoothing</h4>
<p>Kernel Density Estimation involves a technique called <strong>smoothing</strong> - a process applied to a distribution of values that allows us to analyze the more general structure of the dataset.</p>
<p>Many of the visualizations we learned during the last lecture are examples of smoothing. Histograms are smoothed versions of one-dimensional rug plots, and hex plots are smoother alternatives to two-dimensional scatter plots. They remove the detail from individual observations so we can visualize the larger properties of our distribution.</p>
<div class="cell" data-tags="[]" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>titanic <span class="op">=</span> sns.load_dataset(<span class="st">'titanic'</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>sns.rugplot(titanic[<span class="st">'age'</span>],height <span class="op">=</span> <span class="fl">0.5</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="visualization_2_files/figure-html/cell-2-output-1.png" width="590" height="422"></p>
</div>
</div>
<div class="cell" data-tags="[]" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>sns.histplot(titanic[<span class="st">'age'</span>])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="visualization_2_files/figure-html/cell-3-output-1.png" width="593" height="422"></p>
</div>
</div>
</section>
<section id="kernel-density-estimation" class="level4" data-number="8.1.1.2">
<h4 data-number="8.1.1.2" class="anchored" data-anchor-id="kernel-density-estimation"><span class="header-section-number">8.1.1.2</span> Kernel Density Estimation</h4>
<p><strong>Kernel Density Estimation</strong> is a smoothing technique that allows us to estimate a density curve (also known as a probability density function) from a set of observations. There are a few steps in this process:</p>
<ol type="1">
<li>Place a kernel at each data point</li>
<li>Normalize kernels to have total area of 1 (across all kernels)</li>
<li>Sum kernels together</li>
</ol>
<p>Suppose we have 5 data points: <span class="math inline">\([2.2, 2.8, 3.7, 5.3, 5.7]\)</span>. We wish to recreate the following Kernel Density Estimate:</p>
<div class="cell" data-tags="[]" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> [<span class="fl">2.2</span>, <span class="fl">2.8</span>, <span class="fl">3.7</span>, <span class="fl">5.3</span>, <span class="fl">5.7</span>]</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>sns.kdeplot(data)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="visualization_2_files/figure-html/cell-4-output-1.png" width="606" height="404"></p>
</div>
</div>
<p>Let’s walk through each step to construct this density curve.</p>
<section id="step-1---place-a-kernel-at-each-data-point" class="level5" data-number="8.1.1.2.1">
<h5 data-number="8.1.1.2.1" class="anchored" data-anchor-id="step-1---place-a-kernel-at-each-data-point"><span class="header-section-number">8.1.1.2.1</span> Step 1 - Place a Kernel at Each Data Point</h5>
<p>To begin generating a density curve, we need to choose a <strong>kernel</strong> and <strong>bandwidth value (<span class="math inline">\(\alpha\)</span>)</strong>. What are these exactly? A <strong>kernel</strong> is a density curve itself, and the <strong>bandwidth (<span class="math inline">\(\alpha\)</span>)</strong> is a measure of the kernel’s width. Recall that a valid density has an area of 1.</p>
<p>At each of our 5 points (depicted in the rug plot on the left), we’ve placed a Gaussian kernel with a bandwidth parameter of alpha = 1. We’ll explore what these are in the next section.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><strong>Rugplot of Data</strong></p>
<p><img src="images/rugplot_ex.png" alt="rugplot_ex" width="350"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><strong>Kernelized Data</strong></p>
<p><img src="images/kde_step_1.png" alt="kde_step_1" width="360"></p>
</div>
</div>
</section>
<section id="step-2---normalize-kernels-to-have-total-area-of-1" class="level5" data-number="8.1.1.2.2">
<h5 data-number="8.1.1.2.2" class="anchored" data-anchor-id="step-2---normalize-kernels-to-have-total-area-of-1"><span class="header-section-number">8.1.1.2.2</span> Step 2 - Normalize Kernels to Have Total Area of 1</h5>
<p>Notice how these 5 kernels are density curves - meaning they each have an area of 1. In Step 3, we will be summing each these kernels, and we want the result to be a valid density that has an area of 1. Therefore, it makes sense to normalize our current set of kernels by multiplying each by <span class="math inline">\(\frac{1}{5}\)</span>.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><strong>Kernelized Data</strong></p>
<p><img src="images/kde_step_1.png" alt="kde_step_1" width="350"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><strong>Normalized Kernels</strong></p>
<p><img src="images/kde_step_2.png" alt="kde_step_2" width="345"></p>
</div>
</div>
</section>
<section id="step-3---sum-kernels-together" class="level5" data-number="8.1.1.2.3">
<h5 data-number="8.1.1.2.3" class="anchored" data-anchor-id="step-3---sum-kernels-together"><span class="header-section-number">8.1.1.2.3</span> Step 3 - Sum Kernels Together</h5>
<p>Our kernel density estimate (KDE) is the sum of the normalized kernels along the x-axis. It is depicted below on the right.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><strong>Normalized Kernels</strong></p>
<p><img src="images/kde_step_2.png" alt="kde_step_2" width="345"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><strong>Kernel Density Estimate</strong></p>
<p><img src="images/kde_step_3.png" alt="kde_step_3" width="345"></p>
</div>
</div>
</section>
</section>
</section>
<section id="kernel-functions-and-bandwidth" class="level3" data-number="8.1.2">
<h3 data-number="8.1.2" class="anchored" data-anchor-id="kernel-functions-and-bandwidth"><span class="header-section-number">8.1.2</span> Kernel Functions and Bandwidth</h3>
<section id="kernels" class="level4" data-number="8.1.2.1">
<h4 data-number="8.1.2.1" class="anchored" data-anchor-id="kernels"><span class="header-section-number">8.1.2.1</span> Kernels</h4>
<p>A <strong>kernel</strong> (for our purposes) is a valid density function. This means it:</p>
<ul>
<li>Must be non-negative for all inputs.</li>
<li>Must integrate to 1.</li>
</ul>
<p><img src="./images/kde_function.png"></p>
<p>A general “KDE formula” function is given above.</p>
<ol type="1">
<li><span class="math inline">\(K_{\alpha}(x, xi)\)</span> is the kernel centered on the observation <code>i</code>.
<ul>
<li>Each kernel individually has area 1.</li>
<li>x represents any number on the number line. It is the input to our function.</li>
</ul></li>
<li><span class="math inline">\(n\)</span> is the number of observed data points that we have.
<ul>
<li>We multiply by <span class="math inline">\(\frac{1}{n}\)</span> so that the total area of the KDE is still 1.</li>
</ul></li>
<li>Each <span class="math inline">\(x_i \in \{x_1, x_2, \dots, x_n\}\)</span> represents an observed data point.
<ul>
<li>These are what we use to create our KDE by summing multiple shifted kernels centered at these points.</li>
</ul></li>
</ol>
<p>*<span class="math inline">\(\alpha\)</span> (alpha) is the bandwidth or smoothing parameter.</p>
<section id="gaussian-kernel" class="level5" data-number="8.1.2.1.1">
<h5 data-number="8.1.2.1.1" class="anchored" data-anchor-id="gaussian-kernel"><span class="header-section-number">8.1.2.1.1</span> Gaussian Kernel</h5>
<p>The most common kernel is the <strong>Gaussian kernel</strong>. The Gaussian kernel is equivalent to the Gaussian probability density function (the Normal distribution), centered at the observed value <span class="math inline">\(x_i\)</span> with a standard deviation of <span class="math inline">\(\alpha\)</span> (this is known as the <strong>bandwidth</strong> parameter).</p>
<p><span class="math inline">\(K_a(x, x_i) = \frac{1}{\sqrt{2\pi\alpha^{2}}}e^{-\frac{(x-x_i)^{2}}{2\alpha^{2}}}\)</span></p>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> gaussian_kernel(alpha, x, z):</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fl">1.0</span><span class="op">/</span>np.sqrt(<span class="fl">2.</span> <span class="op">*</span> np.pi <span class="op">*</span> alpha<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span> np.exp(<span class="op">-</span>(x <span class="op">-</span> z) <span class="op">**</span> <span class="dv">2</span> <span class="op">/</span> (<span class="fl">2.0</span> <span class="op">*</span> alpha<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>xs <span class="op">=</span> np.linspace(<span class="op">-</span><span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">200</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>kde_curve <span class="op">=</span> [gaussian_kernel(alpha, x, <span class="dv">0</span>) <span class="cf">for</span> x <span class="kw">in</span> xs]</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>plt.plot(xs, kde_curve)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="visualization_2_files/figure-html/cell-5-output-1.png" width="579" height="404" class="figure-img"></p>
<p></p><figcaption class="figure-caption">The Gaussian kernel centered at 0 with bandwidth <span class="math inline">\(\alpha\)</span> = 1.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>If you’ve taken a probability class, you’ll recognize that the mean of this Gaussian kernel is <span class="math inline">\(x_i\)</span> and the standard deviation is <span class="math inline">\(\alpha\)</span>. Increasing <span class="math inline">\(\alpha\)</span> - equivalently, the bandwidth - smoothens the density curve. Larger values of <span class="math inline">\(\alpha\)</span> are typically easier to understand; however, we begin to lose important distributional information.</p>
<p>Here is how adjusting <span class="math inline">\(\alpha\)</span> affects a distribution in some variable from an arbitrary dataset.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><strong>Gaussian Kernel, <span class="math inline">\(\alpha\)</span> = 0.1</strong></p>
<p><img src="images/gaussian_0.1.png" alt="gaussian_0.1" width="345"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><strong>Gaussian Kernel, <span class="math inline">\(\alpha\)</span> = 1</strong></p>
<p><img src="images/gaussian_1.png" alt="gaussian_1" width="345"></p>
</div>
</div>
<div class="columns">
<div class="column" style="width:30%;">
<p><strong>Gaussian Kernel, <span class="math inline">\(\alpha\)</span> = 2</strong></p>
<p><img src="images/gaussian_2.png" alt="gaussian_2" width="345"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><strong>Gaussian Kernel, <span class="math inline">\(\alpha\)</span> = 10</strong></p>
<p><img src="images/gaussian_10.png" alt="gaussian_10" width="345"></p>
</div>
</div>
</section>
<section id="boxcar-kernel" class="level5" data-number="8.1.2.1.2">
<h5 data-number="8.1.2.1.2" class="anchored" data-anchor-id="boxcar-kernel"><span class="header-section-number">8.1.2.1.2</span> Boxcar Kernel</h5>
<p>Another example of a kernel is the <strong>Boxcar kernel</strong>. The boxcar kernel assigns a uniform density to points within a “window” of the observation, and a density of 0 elsewhere. The equation below is a Boxcar kernel with the center at <span class="math inline">\(x_i\)</span> and the bandwidth of <span class="math inline">\(\alpha\)</span>.</p>
<p><span class="math inline">\(K_a(x, x_i) = \begin{cases}  \frac{1}{\alpha}, &amp; |x - x_i| \le \frac{\alpha}{2}\\  0, &amp; \text{else }  \end{cases}\)</span></p>
<div class="cell" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> boxcar_kernel(alpha, x, z):</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (((x<span class="op">-</span>z)<span class="op">&gt;=-</span>alpha<span class="op">/</span><span class="dv">2</span>)<span class="op">&amp;</span>((x<span class="op">-</span>z)<span class="op">&lt;=</span>alpha<span class="op">/</span><span class="dv">2</span>))<span class="op">/</span>alpha</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>xs <span class="op">=</span> np.linspace(<span class="op">-</span><span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">200</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>alpha<span class="op">=</span><span class="dv">1</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>kde_curve <span class="op">=</span> [boxcar_kernel(alpha, x, <span class="dv">0</span>) <span class="cf">for</span> x <span class="kw">in</span> xs]</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>plt.plot(xs, kde_curve)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="visualization_2_files/figure-html/cell-6-output-1.png" width="571" height="404" class="figure-img"></p>
<p></p><figcaption class="figure-caption">The Boxcar kernel centered at 0 with bandwidth <span class="math inline">\(\alpha\)</span> = 1.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The diagram on the right is how the density curve for our 5 point dataset would have looked had we used the Boxcar kernel with bandwidth <span class="math inline">\(\alpha\)</span> = 1.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img src="images/gaussian_kernel.png" alt="kde_step_3" width="350"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><img src="images/boxcar_kernel.png" alt="boxcar_kernel" width="350"></p>
</div>
</div>
</section>
</section>
</section>
<section id="relationships-between-quantitative-variables" class="level3" data-number="8.1.3">
<h3 data-number="8.1.3" class="anchored" data-anchor-id="relationships-between-quantitative-variables"><span class="header-section-number">8.1.3</span> Relationships Between Quantitative Variables</h3>
<p>Up until now, we’ve discussed how to visualize single-variable distributions. Going beyond this, we want to understand the relationship between pairs of numerical variables.</p>
<section id="scatter-plots" class="level4" data-number="8.1.3.1">
<h4 data-number="8.1.3.1" class="anchored" data-anchor-id="scatter-plots"><span class="header-section-number">8.1.3.1</span> Scatter Plots</h4>
<p><strong>Scatter plots</strong> are one of the most useful tools in representing the relationship between two quantitative variables. They are particularly important in gauging the strength, or correlation between variables. Knowledge of these relationships can then motivate decisions in our modeling process.</p>
<p>For example, let’s plot a scatter plot comparing the <code>Maternal Height</code> and <code>Birth Weight</code> colums, using both <code>matplotlib</code> and <code>seaborn</code>.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>births <span class="op">=</span> pd.read_csv(<span class="st">"data/baby.csv"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>births.head(<span class="dv">5</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Matplotlib Example</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>plt.scatter(births[<span class="st">'Maternal Height'</span>], births[<span class="st">'Birth Weight'</span>])</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Maternal Height'</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Birth Weight'</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="visualization_2_files/figure-html/cell-7-output-1.png" width="597" height="422"></p>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seaborn Example</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(data <span class="op">=</span> births, x <span class="op">=</span> <span class="st">'Maternal Height'</span>, y <span class="op">=</span> <span class="st">'Birth Weight'</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                hue <span class="op">=</span> <span class="st">'Maternal Smoker'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>&lt;AxesSubplot:xlabel='Maternal Height', ylabel='Birth Weight'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="visualization_2_files/figure-html/cell-8-output-2.png" width="597" height="422"></p>
</div>
</div>
<p>This is an example where color is used to add a third dimension to our plot. This is possible with the <code>hue</code> paramater in <code>seaborn</code>, which adds a categorical column encoding to an existing visualization. This way, we can look for relationships in <code>Maternal Height</code> and <code>Birth Weight</code> in both maternal smokers and non-smokers. If we wish to see the relationship’s strength more clearly, we can use <code>sns.lmplot</code>.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>sns.lmplot(data <span class="op">=</span> births, x <span class="op">=</span> <span class="st">'Maternal Height'</span>, y <span class="op">=</span> <span class="st">'Birth Weight'</span>, </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>           hue <span class="op">=</span> <span class="st">'Maternal Smoker'</span>, ci <span class="op">=</span> <span class="va">False</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="visualization_2_files/figure-html/cell-9-output-1.png" width="584" height="468"></p>
</div>
</div>
<p>We can make out a weak, positive relationship in the mother’s height and birth weight for both maternal smokers and non-smokers (the baseline is slightly lower in maternal smokers).</p>
</section>
</section>
<section id="overplotting" class="level3" data-number="8.1.4">
<h3 data-number="8.1.4" class="anchored" data-anchor-id="overplotting"><span class="header-section-number">8.1.4</span> Overplotting</h3>
<p>As you may have noticed, the scatterplots of <code>Maternal Height</code> vs.&nbsp;<code>Birth Weight</code> have many densely plotted areas. Many of the points are on top of one other! This makes it difficult to tell exactly how many babies are plotted in each the more densely populated regions of the graph. This can arise when the tools used for measuring data have low granularity, many different values are rounded to the same value, or if the ranges of the two variables differ greatly in scale.</p>
<p>We can overcome this by introducing a small amount of uniform random noise to our data. This is called <em>jittering</em>. Let’s see what happens when we introduce noise to the <code>Maternal Height</code>.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>births[<span class="st">"Maternal Height (jittered)"</span>] <span class="op">=</span> births[<span class="st">"Maternal Height"</span>] <span class="op">+</span> np.random.uniform(<span class="op">-</span><span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="bu">len</span>(births))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>sns.lmplot(data <span class="op">=</span> births, x <span class="op">=</span> <span class="st">'Maternal Height (jittered)'</span>, y <span class="op">=</span> <span class="st">'Birth Weight'</span>, </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>           hue <span class="op">=</span> <span class="st">'Maternal Smoker'</span>, ci <span class="op">=</span> <span class="va">False</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="visualization_2_files/figure-html/cell-10-output-1.png" width="584" height="468"></p>
</div>
</div>
<p>This plot more clearly shows that most of the data is clustered tightly around the point (62.5,120) and gradually becomes more loose further away from the center. It is much easier for us and others to see how the data is distributed. In conclusion, <em>jittering</em> helps us better understand our own data (Goal 1) and communicate results to others (Goal 2).</p>
<section id="hex-plots-and-contour-plots" class="level4" data-number="8.1.4.1">
<h4 data-number="8.1.4.1" class="anchored" data-anchor-id="hex-plots-and-contour-plots"><span class="header-section-number">8.1.4.1</span> Hex Plots and Contour Plots</h4>
<p>Unfortunately, our scatter plots above suffered from overplotting, which made them hard to interpret. And with a large number of points, jittering is unlikely to resolve the issue. Instead, we can look to hex plots and contour plots.</p>
<p><strong>Hex Plots</strong> can be thought of as a two dimensional histogram that shows the joint distribution between two variables. This is particularly useful working with very dense data.</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>sns.jointplot(data <span class="op">=</span> births, x <span class="op">=</span> <span class="st">'Maternal Pregnancy Weight'</span>, </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>              y <span class="op">=</span> <span class="st">'Birth Weight'</span>, kind <span class="op">=</span> <span class="st">'hex'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>&lt;seaborn.axisgrid.JointGrid at 0x2190cbf24c0&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="visualization_2_files/figure-html/cell-11-output-2.png" width="570" height="564"></p>
</div>
</div>
<p>The axes are evidently binned into hexagons, which makes the linear relationship easier to decipher. Darker regions generally indicate a higher density of points.</p>
<p>On the other hand, <strong>contour plots</strong> are two dimensional versions of density curves with marginal distributions of each variable on the axes. We’ve used very similar code here to generate our contour plots, with the addition of the <code>kind = 'kde'</code> and <code>fill = True</code> arguments.</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>sns.jointplot(data <span class="op">=</span> births, x <span class="op">=</span> <span class="st">'Maternal Height'</span>, y <span class="op">=</span> <span class="st">'Birth Weight'</span>,<span class="op">\</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>              kind <span class="op">=</span> <span class="st">'kde'</span>, fill <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>&lt;seaborn.axisgrid.JointGrid at 0x2190cc76640&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="visualization_2_files/figure-html/cell-12-output-2.png" width="570" height="564"></p>
</div>
</div>
</section>
</section>
</section>
<section id="transformations" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="transformations"><span class="header-section-number">8.2</span> Transformations</h2>
<p>These last two lectures have covered visualizations in great depth. We looked at various forms of visualizations, plotting libraries, and high-level theory.</p>
<p>Much of this was done to uncover insights in data, which will prove necessary for the modeling process. A strong graphical correlation between two variables hinted an underlying relationship that has reason for further study. However, relying on visual relationships alone is limiting - not all plots show association. The presence of outliers and other statistical anomalies make it hard to interpret data.</p>
<p><strong>Transformations</strong> are the process of manipulating data to find significant relationships between variables. These are often found by applying mathematical functions to variables that “transform” their range of possible values and highlight some previously hidden associations between data.</p>
<section id="transforming-a-distribution" class="level4" data-number="8.2.0.1">
<h4 data-number="8.2.0.1" class="anchored" data-anchor-id="transforming-a-distribution"><span class="header-section-number">8.2.0.1</span> Transforming a Distribution</h4>
<p>When a distribution has a large dynamic range, it can be useful to take the logarithm of the data. For example, computing the logarithm of the ticket prices on the Titanic reduces skeweness and yields a distribution that is more “spread” across the x-axis. While it makes individual observations harder to interpret, the distribution is more favorable for subsequent analysis.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img src="images/untransformed_titanic.png" alt="untransformed_titanic" width="400"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><img src="images/transformed_titanic.png" alt="transformed_titanic" width="400"></p>
</div>
</div>
</section>
<section id="linearizing-a-relationship" class="level4" data-number="8.2.0.2">
<h4 data-number="8.2.0.2" class="anchored" data-anchor-id="linearizing-a-relationship"><span class="header-section-number">8.2.0.2</span> Linearizing a Relationship</h4>
<p>Transformations are perhaps most useful to <strong>linearize a relationship</strong> between variables. If we find a transformation to make a scatter plot of two variables linear, we can “backtrack” to find the exact relationship between the variables. Linear relationships are particularly simple to interpret, and we’ll be doing a lot of linear modeling in Data 100 - starting next week!</p>
<p>Say we want to understand the relationship between healthcare and life expectancy. Intuitively there should be a positive correlation, but upon plotting values from a dataset, we find a non-linear relationship that is somewhat hard to understand. However, applying a logarithmic transformation to both variables - healthcare and life expectancy - results in a scatter plot with a linear trend that we can interpret.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img src="images/untransformed_healthcare_lifeexp.png" alt="untransformed_titanic" width="400"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><img src="images/transformed_healthcare_lifeexp.png" alt="transformed_titanic" width="400"></p>
</div>
</div>
<p>How can we find the relationship between the original variables? We know that taking a log of both axes gave us a linear relationship, so we can say (roughly) that</p>
<p><span class="math display">\[\log y= a\times\log x + b\]</span></p>
<p>Solving for <span class="math inline">\(y\)</span> implies a <strong>power</strong> relationship in the original plot.</p>
<p><span class="math display">\[y= e^{a\times\log x + b}\]</span> <span class="math display">\[y= Ce^{a\times\log x}\]</span> <span class="math display">\[y= Cx^{a}\]</span></p>
<p>How did we know that taking the logarithm of both sides would result in a linear relationship? The <strong>Tukey-Mosteller Bulge Diagram</strong> is helpful here. We can use the direction of the buldge in our original data to find the appropriate transformations that will linearize the relationship. These transformations are found on axes that are nearest to the buldge. The buldge in our earlier example lay in Quadrant 2, so the transformations <span class="math inline">\(\log x\)</span>, <span class="math inline">\(\sqrt x\)</span>, <span class="math inline">\(y^{2}\)</span>, or <span class="math inline">\(y^{3}\)</span> are possible contenders. It’s important to note that this diagram is not perfect, and some transformations will work better than others. In our case, <span class="math inline">\(\log x\)</span> and <span class="math inline">\(\log y\)</span> (found in Quadrant 3) were the best.</p>
<p><img src="images/tukey_mosteller.png" alt="tukey_mosteller" width="400"></p>
</section>
<section id="additional-remarks" class="level4" data-number="8.2.0.3">
<h4 data-number="8.2.0.3" class="anchored" data-anchor-id="additional-remarks"><span class="header-section-number">8.2.0.3</span> Additional Remarks</h4>
<p>Visualization requires a lot of thought! - There are many tools for visualizing distributions. - Distribution of a single variable: 1. rug plot 2. histogram 3. density plot 4. box plot 5. violin plot - Joint distribution of two quantitative variables: 1. scatter plot 2. hex plot 3. contour plot.</p>
<p>This class primarily uses <code>seaborn</code> and <code>matplotlib</code>, but <code>Pandas</code> also has basic built-in plotting methods. Many other visualization libraries exist, and <code>plotly</code> is one of them. - <code>plotly</code> creates very easily creates interactive plots. - <code>plotly</code> will occasionally appear in lecture code, labs, and assignments!</p>
<p>Next, we’ll go deeper into the theory behind visualization.</p>
</section>
</section>
<section id="visualization-theory" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="visualization-theory"><span class="header-section-number">8.3</span> Visualization Theory</h2>
<p>This section marks a pivot to the second major topic of this lecture - visualization theory. We’ll discuss the abstract nature of visualizations and analyze how they convey information.</p>
<p>Remember, we had two goals for visualizing data. This section is particularly important in:</p>
<ol type="1">
<li>Helping us understand the data and results</li>
<li>Communicating our results and conclusions with others</li>
</ol>
<section id="information-channels" class="level3" data-number="8.3.1">
<h3 data-number="8.3.1" class="anchored" data-anchor-id="information-channels"><span class="header-section-number">8.3.1</span> Information Channels</h3>
<p>Visualizations are able to convey information through various encodings. In the remainder of this lecture, we’ll look at the use of color, scale, and depth, to name a few.</p>
<section id="encodings-in-rugplots" class="level4" data-number="8.3.1.1">
<h4 data-number="8.3.1.1" class="anchored" data-anchor-id="encodings-in-rugplots"><span class="header-section-number">8.3.1.1</span> Encodings in Rugplots</h4>
<p>One detail that we may have overlooked in our earlier discussion of rugplots is the importance of encodings. Rugplots are effective visuals because they utilize line thickness to encode frequency. Consider the following diagram:</p>
<p><img src="images/rugplot_encoding.png" alt="rugplot_encoding" width="600"></p>
</section>
<section id="multi-dimensional-encodings" class="level4" data-number="8.3.1.2">
<h4 data-number="8.3.1.2" class="anchored" data-anchor-id="multi-dimensional-encodings"><span class="header-section-number">8.3.1.2</span> Multi-Dimensional Encodings</h4>
<p>Encodings are also useful for representing multi-dimensional data. Notice how the following visual highlights four distinct “dimensions” of data:</p>
<ul>
<li>X-axis</li>
<li>Y-axis</li>
<li>Area</li>
<li>Color</li>
</ul>
<p><img src="images/mutli_dim_encodings.png" alt="multi_dim_encoding" width="400"></p>
<p>The human visual perception sytem is only capable of visualizing data in a three-dimensional plane, but as you’ve seen, we can encode many more channels of information.</p>
</section>
</section>
<section id="harnessing-the-axes" class="level3" data-number="8.3.2">
<h3 data-number="8.3.2" class="anchored" data-anchor-id="harnessing-the-axes"><span class="header-section-number">8.3.2</span> Harnessing the Axes</h3>
<section id="consider-scale-of-the-data" class="level4" data-number="8.3.2.1">
<h4 data-number="8.3.2.1" class="anchored" data-anchor-id="consider-scale-of-the-data"><span class="header-section-number">8.3.2.1</span> Consider Scale of the Data</h4>
<p>However, we should be careful to not misrepresent relationships in our data by manipulating the scale or axes. The visualization below improperly portrays two seemingly independent relationships on the same plot. The authors have clearly changed the scale of the y-axis to mislead their audience.</p>
<p><img src="images/wrong_scale_viz.png" alt="wrong_scale_viz" width="350"></p>
<p>Notice how the downwards-facing line segment contains values in the millions, while the upwards-trending segment only contains values near three hundred thousand. These lines should not be intersecting.</p>
<p>When there is a large difference in the magnitude of the data, it’s advised to analyze percentages instead of counts. The following diagrams correctly display the trends in cancer screening and abortion rates.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img src="images/good_viz_scale_1.png" alt="good_viz_scale_1" width="345"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><img src="images/good_viz_scale_2.png" alt="good_viz_scale_2" width="345"></p>
</div>
</div>
</section>
<section id="reveal-the-data" class="level4" data-number="8.3.2.2">
<h4 data-number="8.3.2.2" class="anchored" data-anchor-id="reveal-the-data"><span class="header-section-number">8.3.2.2</span> Reveal the Data</h4>
<p>Great visualizations not only consider the scale of the data, but also utilize the axes in a way that best conveys information. For example, data scientists commonly set certain axes limits to highlight parts of the visualization they are most interested in.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img src="images/unrevealed_viz.png" alt="unrevealed_viz" width="345"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><img src="images/revealed_viz.png" alt="revealed_viz" width="345"></p>
</div>
</div>
<p>The visualization on the right captures the trend in coronavirus cases during the month March in 2020. From only looking at the visualization on the left, a viewer may incorrectly believe that coronavirus began to skyrocket on March 4<sup>th</sup>, 2020. However, the second illustration tells a different story - cases rose closer to March 21<sup>th</sup>, 2020.</p>
</section>
</section>
<section id="harnessing-color" class="level3" data-number="8.3.3">
<h3 data-number="8.3.3" class="anchored" data-anchor-id="harnessing-color"><span class="header-section-number">8.3.3</span> Harnessing Color</h3>
<p>Color is another important feature in visualizations that does more than what meets the eye.</p>
<p>Last lecture, we used color to encode a categorical variable in our scatter plot. In this section, we will discuss uses of color in novel visualizations like colormaps and heatmaps.</p>
<p>5-8% of the world is red-green color blind, so we have to be very particular about our color scheme. We want to make these as accessible as possible. Choosing a set of colors which work together is evidently a challenging task!</p>
<section id="colormaps" class="level4" data-number="8.3.3.1">
<h4 data-number="8.3.3.1" class="anchored" data-anchor-id="colormaps"><span class="header-section-number">8.3.3.1</span> Colormaps</h4>
<p>Colormaps are mappings from pixel data to color values, and they’re often used to highlight distinct parts of an image. Let’s investigate a few properties of colormaps.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><strong>Jet Colormap</strong> <img src="images/jet_colormap.png" alt="jet_colormap" width="250"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><strong>Viridis Colormap</strong> <img src="images/viridis_colormap.png" alt="viridis_colormap" width="250"></p>
</div>
</div>
<p>The jet colormap is infamous for being misleading. While it seems more vibrant than viridis, the aggressive colors poorly encode numerical data. To understand why, let’s analyze the following images.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img src="images/jet_four_by_four.png" alt="four_by_four_colormap" width="300"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><img src="images/jet_3_images.png" alt="jet_3_colormap" width="250"></p>
</div>
</div>
<p>The diagram on the left compares how a variety of colormaps represent pixel data that transitions from a high to low intensity. These include the jet colormap (row a) and grayscale (row b). Notice how the grayscale images do the best job in smoothly transitioning between pixel data. The jet colormap is the worst at this - the four images in row (a) look like a conglomeration of individual colors.</p>
<p>The difference is also evident in the images labeled (a) and (b) on the left side. The grayscale image is better at preserving finer detail in the vertical line strokes. Additionally, grayscale is preferred in x-ray scans for being more neutral. The intensity of dark red color in the jet colormap is frightening and indicates something is wrong.</p>
<p>Why is the jet colormap so much worse? The answer lies in how its color composition is percieved to the human eye.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><strong>Jet Colormap Perception</strong> <img src="images/jet_perceptually_uniform.png" alt="jet_perceptually_uniform" width="300"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><strong>Viridis Colormap Perception</strong> <img src="images/viridis_perceptually_uniform.png" alt="viridis_perceptually_uniform" width="336"></p>
</div>
</div>
<p>The jet colormap is largely misleading because it is not perceptually uniform. <strong>Perceptually uniform colormaps</strong> have the property that if the pixel data goes from 0.1 to 0.2, the perceptual change is the same as when the data goes from 0.8 to 0.9.</p>
<p>Notice how the said uniformity is present within the linear trend displayed in the viridis colormap. On the other hand, the jet colormap is largely non-linear - this is precisely why it’s considered a worse colormap.</p>
</section>
</section>
<section id="harnessing-markings" class="level3" data-number="8.3.4">
<h3 data-number="8.3.4" class="anchored" data-anchor-id="harnessing-markings"><span class="header-section-number">8.3.4</span> Harnessing Markings</h3>
<p>In our earlier discussion of multi-dimensional encodings, we analyzed a scatter plot with four pseudo-dimensions: the two axes, area, and color. Were these appropriate to use? The following diagram analyzes how well the human eye can distinguish between these “markings”.</p>
<p><img src="images/markings_viz.png" alt="markings_viz" width="300"></p>
<p>There are a few key takeaways from this diagram</p>
<ul>
<li>Lengths are easy to discern. Don’t use plots with jiggled baselines - keep everything axis-aligned.</li>
<li>Avoid pie charts! Angle judgements are inaccurate.</li>
<li>Areas and volumes are hard to distinguish (area charts, word clouds, etc)</li>
</ul>
</section>
<section id="harnessing-conditioning" class="level3" data-number="8.3.5">
<h3 data-number="8.3.5" class="anchored" data-anchor-id="harnessing-conditioning"><span class="header-section-number">8.3.5</span> Harnessing Conditioning</h3>
<p>Conditioning is the process of comparing data that belong to seperate groups. We’ve seen this before in overlayed distributions, side-by-side box-plots, and scatter plots with categorical encodings. Here, we’ll introduce terminology that formalizes these examples.</p>
<p>Consider an example where we want to analyze income earnings for male and females with varying levels of education. There are multiple ways to compare this data.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img src="images/male_female_earnings_barplot.png" alt="jet_perceptually_uniform" width="360"></p>
</div><div class="column" style="width:20%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:30%;">
<p><img src="images/male_female_earnings_scatterplot.png" alt="viridis_perceptually_uniform" width="340"></p>
</div>
</div>
<p>The barplot is an example of <strong>juxtaposition</strong>: placing multiple plots side by side, with the same scale. The scatter plot is an example of <strong>superposition</strong>: placing multiple density curves, scatter plots on top of each other.</p>
<p>Which is better depends on the problem at hand. Here, superposition makes the precise wage difference very clear from a quick glance. But many sophisticated plots convey information that favors the use of juxtaposition. Below is one example.</p>
<p><img src="images/small_multiples.png" alt="small_multiples" width="600"></p>
</section>
<section id="harnessing-context" class="level3" data-number="8.3.6">
<h3 data-number="8.3.6" class="anchored" data-anchor-id="harnessing-context"><span class="header-section-number">8.3.6</span> Harnessing Context</h3>
<p>The last component to a great visualization is perhaps the most critical - the use of context. Adding informative titles, axis labels, and descriptive captions are all best practices that we’ve heard repeatedly in Data 8.</p>
<p>A publication-ready plot (and every Data 100 plot) needs:</p>
<ul>
<li>Informative title (takeaway, not description)</li>
<li>Axis labels</li>
<li>Reference lines, markers, etc</li>
<li>Legends, if appropriate</li>
<li>Captions that describe data</li>
</ul>
<p>Captions should be:</p>
<ul>
<li>Comprehensive and self-contained</li>
<li>Describe what has been graphed</li>
<li>Draw attention to important features</li>
<li>Describe conclusions drawn from graphs</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../visualization_1/visualization_1.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Visualization I</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../sampling/sampling.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Sampling</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>