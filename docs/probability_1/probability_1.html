<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Random Variables – Data 100: Principles and Techniques of Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../assets/images/data100_logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-42ed7287b56c5c583e2c2463c9cf4916.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../assets/styles/style.css">
</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../probability_1/probability_1.html">Random Variables</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../assets/images/data100_logo.png" alt="Data 100 logo" class="sidebar-logo light-content py-0 d-lg-inline d-none">
      <img src="../assets/images/data100_logo.png" alt="Data 100 logo" class="sidebar-logo dark-content py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Data 100 Course Notes</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/DS-100/course-notes" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro_lec/introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pandas_1/pandas_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pandas I</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pandas_2/pandas_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pandas II</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pandas_3/pandas_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pandas III</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../eda/eda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Cleaning and EDA</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../regex/regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regular Expressions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../visualization_1/visualization_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualization I</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../visualization_2/visualization_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualization II</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sampling/sampling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sampling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modeling_slr/modeling_slr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modeling &amp; SLR</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../constant_model_loss_transformations/loss_transformations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Constant Model, Loss, and Transformations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ols/ols.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ordinary Least Squares</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../case_study_HCE/case_study_HCE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Case Study in Human Contexts and Ethics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../gradient_descent/gradient_descent.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">sklearn and Gradient Descent</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../feature_engineering/feature_engineering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Gradient Descent Continuation, Feature Engineering</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cv_regularization/cv_reg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cross Validation and Regularization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../probability_1/probability_1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Random Variables</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../probability_2/probability_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Estimators, Bias, and Variance</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../inference_causality/inference_causality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Parameter Inference and Bootstrapping</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sql_I/sql_I.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SQL I</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../sql_II/sql_II.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SQL II</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../logistic_regression_1/logistic_reg_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Logistic Regression I</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../logistic_regression_2/logistic_reg_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Logistic Regression II</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../clustering/clustering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Clustering</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pca/pca.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PCA</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#random-variables-and-distributions" id="toc-random-variables-and-distributions" class="nav-link active" data-scroll-target="#random-variables-and-distributions">Random Variables and Distributions</a>
  <ul>
  <li><a href="#example-tossing-a-coin" id="toc-example-tossing-a-coin" class="nav-link" data-scroll-target="#example-tossing-a-coin">Example: Tossing a Coin</a></li>
  <li><a href="#example-sampling-data-100-students" id="toc-example-sampling-data-100-students" class="nav-link" data-scroll-target="#example-sampling-data-100-students">Example: Sampling Data 100 Students</a></li>
  <li><a href="#distributions" id="toc-distributions" class="nav-link" data-scroll-target="#distributions">Distributions</a></li>
  </ul></li>
  <li><a href="#expectation-and-variance" id="toc-expectation-and-variance" class="nav-link" data-scroll-target="#expectation-and-variance">Expectation and Variance</a>
  <ul>
  <li><a href="#expectation" id="toc-expectation" class="nav-link" data-scroll-target="#expectation">Expectation</a>
  <ul>
  <li><a href="#example-1-coin-toss" id="toc-example-1-coin-toss" class="nav-link" data-scroll-target="#example-1-coin-toss">Example 1: Coin Toss</a></li>
  <li><a href="#example-2" id="toc-example-2" class="nav-link" data-scroll-target="#example-2">Example 2</a></li>
  </ul></li>
  <li><a href="#variance" id="toc-variance" class="nav-link" data-scroll-target="#variance">Variance</a></li>
  <li><a href="#example-die" id="toc-example-die" class="nav-link" data-scroll-target="#example-die">Example: Die</a></li>
  </ul></li>
  <li><a href="#sums-of-random-variables" id="toc-sums-of-random-variables" class="nav-link" data-scroll-target="#sums-of-random-variables">Sums of Random Variables</a>
  <ul>
  <li><a href="#properties-of-expectation" id="toc-properties-of-expectation" class="nav-link" data-scroll-target="#properties-of-expectation">Properties of Expectation</a></li>
  <li><a href="#properties-of-variance" id="toc-properties-of-variance" class="nav-link" data-scroll-target="#properties-of-variance">Properties of Variance</a></li>
  <li><a href="#example-two-dice" id="toc-example-two-dice" class="nav-link" data-scroll-target="#example-two-dice">Example: Two Dice</a></li>
  <li><a href="#covariance-and-correlation" id="toc-covariance-and-correlation" class="nav-link" data-scroll-target="#covariance-and-correlation">Covariance and Correlation</a></li>
  <li><a href="#equal-vs.-identically-distributed-vs.-i.i.d" id="toc-equal-vs.-identically-distributed-vs.-i.i.d" class="nav-link" data-scroll-target="#equal-vs.-identically-distributed-vs.-i.i.d">Equal vs.&nbsp;Identically Distributed vs.&nbsp;i.i.d</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Random Variables</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Learning Outcomes
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ul>
<li>Define a random variable in terms of its distribution</li>
<li>Compute the expectation and variance of a random variable</li>
<li>Gain familiarity with the Bernoulli and binomial random variables</li>
</ul>
</div>
</div>
</div>
<p>In the past few lectures, we’ve examined the role of complexity in influencing model performance. We’ve considered model complexity in the context of a tradeoff between two competing factors: model variance and training error. More specifically, in the last lecture we discussed how the optimal theta after regularization is the following:</p>
<p><span class="math display">\[ \hat{\theta} = \text{arg}\underset{\theta}{\text{min}}\  \textbf{Loss}(\theta, \text{data}) + \lambda\ \textbf{Regularizer}(\theta)\]</span></p>
<p>Here, the <strong>Loss</strong> term ensures that the model <strong>fits the data</strong> and the <strong>Regularizer</strong> term ensures that the model <strong>isn’t too complex</strong>. The <span class="math inline">\(\lambda\)</span> term is the regularization <strong>hyperparameter</strong> which is tuned using <strong>cross-validation</strong> to prevent <strong>over-fitting</strong> to our data. We also have two options for the regularizer:</p>
<ul>
<li><span class="math inline">\(L_1\)</span> (absolute) penalty <span class="math inline">\(\rightarrow\)</span> <strong>Lasso Regression</strong>
<ul>
<li>Allows for <strong>sparsity</strong> where we can drop features that are less useful</li>
</ul></li>
<li><span class="math inline">\(L_2\)</span> (squared) penalty <span class="math inline">\(\rightarrow\)</span> <strong>Ridge Regression</strong>
<ul>
<li>Allows for <strong>robustness</strong> where the weight is spread out over more features</li>
</ul></li>
</ul>
<p>The goal is to find a balance between <strong>bias (underfitting)</strong> and <strong>variance (overfitting)</strong>. So far, our analysis has been mostly qualitative. We’ve acknowledged that our choice of model complexity needs to strike a balance between the two, but we haven’t yet discussed <em>why</em> exactly this tradeoff exists.</p>
<p>To better understand the origin of this tradeoff, we will need to dive into <strong>random variables</strong>. The next two course notes on probability will be a brief digression from our work on modeling so we can build up the concepts needed to understand this so-called <strong>bias-variance tradeoff</strong>. In specific, we will cover:</p>
<ol type="1">
<li>Random Variables: introduce random variables, considering the concepts of expectation, variance, and covariance</li>
<li>Estimators, Bias, and Variance: re-express the ideas of model variance and training error in terms of random variables and use this new perspective to investigate our choice of model complexity</li>
</ol>
<p>We’ll go over just enough probability to help you understand its implications for modeling, but if you want to go a step further, take Data 140, CS 70, and/or EECS 126.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Data 8 Recap
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Recall the following concepts from Data 8:</p>
<ol type="1">
<li><p>Sample mean: The mean of the random sample</p></li>
<li><p><strong>Central Limit Theorem</strong>: If you draw a large random sample with replacement, then, regardless of the population distribution, the probability distribution of the sample mean</p>
<ol type="a">
<li><p>is roughly normal</p></li>
<li><p>is centered at the population mean</p></li>
<li><p>has an <span class="math inline">\(SD = \frac{\text{population SD}}{\sqrt{\text{sample size}}}\)</span></p></li>
</ol></li>
</ol>
</div>
</div>
</div>
<p>In Data 100, we want to understand the broader relationship between the following:</p>
<ul>
<li><strong>Population parameter</strong>: a number that describes something about the population</li>
<li><strong>Sample statistic</strong>: an estimate of the number computed on a sample</li>
</ul>
<section id="random-variables-and-distributions" class="level2">
<h2 class="anchored" data-anchor-id="random-variables-and-distributions">Random Variables and Distributions</h2>
<p>Suppose we generate a set of random data, like a random sample from some population. A <strong>random variable</strong> is a <em>function</em> from the outcome of a random event to a number.</p>
<p>It is <em>random</em> since our sample was drawn at random; it is <em>variable</em> because its exact value depends on how this random sample came out. As such, the domain or input of our random variable is all possible outcomes for some random event in a <em>sample space</em>, and its range or output is the real number line. We typically denote random variables with uppercase letters, such as <span class="math inline">\(X\)</span> or <span class="math inline">\(Y\)</span>. In contrast, note that regular variables tend to be denoted using lowercase letters. Sometimes we also use uppercase letters to refer to matrices (such as your design matrix <span class="math inline">\(\mathbb{X}\)</span>), but we will do our best to be clear with the notation.</p>
<p>To motivate what this (rather abstract) definition means, let’s consider the following examples:</p>
<section id="example-tossing-a-coin" class="level3">
<h3 class="anchored" data-anchor-id="example-tossing-a-coin">Example: Tossing a Coin</h3>
<p>Let’s formally define a fair coin toss. A fair coin can land on heads (<span class="math inline">\(H\)</span>) or tails (<span class="math inline">\(T\)</span>), each with a probability of 0.5. With these possible outcomes, we can define a random variable <span class="math inline">\(X\)</span> as: <span class="math display">\[X = \begin{cases}
      1, \text{if the coin lands heads} \\
      0, \text{if the coin lands tails}
   \end{cases}\]</span></p>
<p><span class="math inline">\(X\)</span> is a function with a domain, or input, of <span class="math inline">\(\{H, T\}\)</span> and a range, or output, of <span class="math inline">\(\{1, 0\}\)</span>. In practice, while we don’t use the following function notation, you could write the above as <span class="math display">\[X = \begin{cases}  X(H) = 1 \\ X(T) = 0 \end{cases}\]</span></p>
</section>
<section id="example-sampling-data-100-students" class="level3">
<h3 class="anchored" data-anchor-id="example-sampling-data-100-students">Example: Sampling Data 100 Students</h3>
<p>Suppose we draw a random sample <span class="math inline">\(s\)</span> of size 3 from all students enrolled in Data 100.</p>
<p>We can define the random variable <span class="math inline">\(Y\)</span> as the number of data science students in our sample. Its domain is all possible samples of size 3, and its range is <span class="math inline">\(\{0, 1, 2, 3\}\)</span>.</p>
<p align="center">
<img src="images/rv.png" alt="Illustration of the population (all Data 100 students) with data science students in blue. Different random samples can be taken where the number of data science students in the sample differs." width="600" class="center">
</p>
<p>Note that we can use random variables in mathematical expressions to create new random variables.</p>
<p>For example, let’s say we <strong>sample 3 students at random</strong> from lecture and look at their midterm scores. Let <span class="math inline">\(X_1\)</span>, <span class="math inline">\(X_2\)</span>, and <span class="math inline">\(X_3\)</span> represent each student’s midterm grade.</p>
<p>We can use these random variables to create a new random variable, <span class="math inline">\(Y\)</span>, which represents the average of the 3 scores: <span class="math inline">\(Y = (X_1 + X_2 + X_3)/3\)</span>.</p>
<p>As we’re creating this random variable, a few questions arise:</p>
<ul>
<li>What can we say about the distribution of <span class="math inline">\(Y\)</span>?</li>
<li>How does it depend on the distribution of <span class="math inline">\(X_1\)</span>, <span class="math inline">\(X_2\)</span>, and <span class="math inline">\(X_3\)</span>?</li>
</ul>
<p>But, what exactly is a distribution? Let’s dive into this!</p>
</section>
<section id="distributions" class="level3">
<h3 class="anchored" data-anchor-id="distributions">Distributions</h3>
<p>To define any random variable <span class="math inline">\(X\)</span>, we need to be able to specify 2 things:</p>
<ol type="1">
<li><p><strong>Possible values</strong>: the set of values the random variable can take on.</p>
<ul>
<li><strong>Discrete</strong>: listable number of possible outcomes. For example, coin flips (heads or tails) can be described as a RV <span class="math inline">\(X_i \in \{0, 1\}\)</span>, where <span class="math inline">\(X_i\)</span> is the <span class="math inline">\(i\)</span>th toss.</li>
<li><strong>Continuous</strong>: unlistable number of possible outcomes. For example, let <span class="math inline">\(Y_i\)</span> be an RV representing the number of seconds a coin is in the air during the <span class="math inline">\(i\)</span>th toss.</li>
</ul></li>
<li><p><strong>Probabilities</strong>: the chance that the random variable will take each possible value.</p>
<ul>
<li>Each probability should be a real-number between 0 and 1 (inclusive)</li>
<li>The total probability of all possible values should be 1.</li>
</ul></li>
</ol>
<p>If <span class="math inline">\(X\)</span> is discrete (has a finite number of possible values), the probability that a random variable <span class="math inline">\(X\)</span> takes on the value <span class="math inline">\(x\)</span> is given by <span class="math inline">\(P(X=x)\)</span>, and probabilities must sum to 1: <span class="math inline">\(\underset{\text{all } x}{\sum} P(X=x) = 1\)</span>,</p>
<p>We can often display this using a <strong>probability distribution table</strong>. In the coin toss example, the probability distribution table of <span class="math inline">\(X\)</span> is given by.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><span class="math inline">\(x\)</span></th>
<th><span class="math inline">\(P(X=x)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td><span class="math inline">\(\frac{1}{2}\)</span></td>
</tr>
<tr class="even">
<td>1</td>
<td><span class="math inline">\(\frac{1}{2}\)</span></td>
</tr>
</tbody>
</table>
<p>The distribution of a random variable <span class="math inline">\(X\)</span> fully defines an RV (i.e.&nbsp;describes how the total probability of 100% is split across all the possible values of <span class="math inline">\(X\)</span>). With the distribution of a RV, you can:</p>
<ul>
<li>compute <em>properties</em> of the RV and other derived variables (e.g., mean, median, variance, …)</li>
<li><em>simulate</em> random draws of the RV (e.g., flip 100 coins, what happens?)
<ul>
<li>randomly pick values of <span class="math inline">\(X\)</span> according to its distribution using <code>np.random.choice()</code> or <code>df.sample()</code></li>
</ul></li>
</ul>
<p>The <em>theoretical</em> distribution of a <strong>discrete</strong> random variable can also be represented using a histogram, since there are a finite number of possible outcomes. If a variable is <strong>continuous</strong>, meaning it can take on infinitely many values, we can illustrate its distribution using a density curve.</p>
<p align="center">
<img src="images/discrete_continuous.png" alt="Two plots are shown, one histogram and one a density curve." width="700">
</p>
<p>We often don’t know the (true) distribution and instead compute an empirical distribution. If you flip a coin 3 times and get {H, H, T}, you may ask — what is the probability that the coin will land heads? We can come up with an <strong>empirical estimate</strong> of <span class="math inline">\(\frac{2}{3}\)</span>, though the true probability might be <span class="math inline">\(\frac{1}{2}\)</span>.</p>
<p>Probabilities are areas. For discrete random variables, the <em>area of the red bars</em> represents the probability that a discrete random variable <span class="math inline">\(X\)</span> falls within those values. For continuous random variables, the <em>area under the curve</em> represents the probability that a continuous random variable <span class="math inline">\(Y\)</span> falls within those values.</p>
<p align="center">
<img src="images/probability_areas.png" alt="Two plots are shown. On the left, the plot is titled Distribution of discrete random variable X and shows a histogram. On the right is the plot titled Distribution of continuous random variable Y and shows a density curve. " width="600">
</p>
<p>If we sum up the <strong>total area</strong> of the bars/under the density curve, we should get 100%, or 1. Continuous random variables are more complex (requiring a probability density function), so take a probability class like Data 140 to learn more.</p>
<p>One common probability distribution is the <strong>Bernoulli</strong> distribution which is a <strong>binary variable</strong> that takes on <strong>two values</strong>: 0 or 1. For example,</p>
<p><span class="math display">\[X = \begin{cases}
      1, \text{if the coin lands heads} \\
      0, \text{if the coin lands tails}
   \end{cases}\]</span></p>
<p>The Bernoulli distribution is <strong>parameterized by p</strong> the probability P(X=1), and the outcomes can be seen in the <strong>probability table</strong> below. Note that we use the notation <strong>X ~ Bernoulli(p)</strong> to denote that the <strong>random variable X</strong> has a Bernoulli distribution with parameter p.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Outcome</th>
<th>Probability</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>p</td>
</tr>
<tr class="even">
<td>0</td>
<td>1-p</td>
</tr>
</tbody>
</table>
<p>Rather than fully write out a probability distribution or show a histogram, there are some common distributions that come up frequently when doing data science. These distributions are specified by some <strong>parameters</strong> (the numbers inside the parentheses), which are constants that specify the shape of the distribution. In terms of notation, the ‘~’ again means “has the probability distribution of”.</p>
<p>These common distributions are listed below:</p>
<p><strong>Discrete:</strong></p>
<ol type="1">
<li><strong>Bernoulli</strong>(<span class="math inline">\(p\)</span>): If <span class="math inline">\(X\)</span> ~ Bernoulli(<span class="math inline">\(p\)</span>), then <span class="math inline">\(X\)</span> takes on a value 1 with probability <span class="math inline">\(p\)</span>, and 0 with probability <span class="math inline">\(1 - p\)</span>. Bernoulli random variables are also termed the <strong>“indicator” random variables</strong>.</li>
<li><strong>Binomial</strong>(<span class="math inline">\(n\)</span>, <span class="math inline">\(p\)</span>): If <span class="math inline">\(X\)</span> ~ Binomial(<span class="math inline">\(n\)</span>, <span class="math inline">\(p\)</span>), then <span class="math inline">\(X\)</span> counts the number of 1s in <span class="math inline">\(n\)</span> independent Bernoulli(<span class="math inline">\(p\)</span>) trials.</li>
<li><strong>Categorical</strong>(<span class="math inline">\(p_1, ..., p_k\)</span>) of values: The probability of each value is 1 / (number of possible values).</li>
</ol>
<p><strong>Continuous:</strong></p>
<ol type="1">
<li><strong>Uniform</strong> on the unit interval (0, 1): The density is flat at 1 on (0, 1) and 0 elsewhere. We won’t get into what density means as much here, but intuitively, this is saying that there’s an equally likely chance of getting any value on the interval (0, 1).</li>
<li><strong>Normal</strong>(<span class="math inline">\(\mu\)</span>, <span class="math inline">\(\sigma^2\)</span>): The probability density is specified by <span class="math inline">\(\frac{1}{\sqrt{2\pi\sigma^2}}e^{-\frac{(x-\mu)^2}{2\sigma^2}}\)</span>. This bell-shaped distribution comes up fairly often in data, in part due to the Central Limit Theorem you saw back in Data 8.</li>
</ol>
</section>
</section>
<section id="expectation-and-variance" class="level2">
<h2 class="anchored" data-anchor-id="expectation-and-variance">Expectation and Variance</h2>
<p>There are several ways to describe a random variable. The methods shown above — a table of all samples <span class="math inline">\(s, X(s)\)</span>, distribution table <span class="math inline">\(P(X=x)\)</span>, and histograms — are all definitions that <em>fully describe</em> a random variable. Often, it is easier to describe a random variable using some <em>numerical summary</em> rather than fully defining its distribution. These numerical summaries are numbers that characterize some properties of the random variable. Because they give a “summary” of how the variable tends to behave, they are <em>not</em> random. Instead, think of them as a static number that describes a certain property of the random variable. In Data 100, we will focus our attention on the expectation and variance of a random variable.</p>
<section id="expectation" class="level3">
<h3 class="anchored" data-anchor-id="expectation">Expectation</h3>
<p>The <strong>expectation</strong> of a <em>discrete</em> random variable <span class="math inline">\(X\)</span> is the <strong>weighted average</strong> of the values of <span class="math inline">\(X\)</span>, where the weights are the probabilities of each value occurring. There are two equivalent ways to compute the expectation:</p>
<ol type="1">
<li>Apply the weights one <em>sample</em> at a time: <span class="math display">\[\mathbb{E}[X] = \sum_{\text{all possible } s} X(s) P(s)\]</span>.</li>
<li>Apply the weights one possible <em>value</em> at a time: <span class="math display">\[\mathbb{E}[X] = \sum_{x \in X} x \cdot P(X = x)\]</span></li>
</ol>
<p>The latter is more commonly used as we are usually just given the distribution, not all possible samples.</p>
<p>The expectation of a continuous random variable <span class="math inline">\(X\)</span> can be derived via integration of its probability density function <span class="math inline">\(f(x)\)</span>: <span class="math display">\[\mathbb{E}[X] = \int_{-\infty}^{\infty} x \cdot f(x) dx\]</span> Exact computations are <em>out-of-scope</em> for Data 100.</p>
<p>We want to emphasize that the <strong>expectation is a <em>number</em>, not a random variable</strong>. Expectation is a generalization of the average, and it has the same units as the random variable. It is also the <strong>center of gravity</strong> of the <strong>probability distribution histogram</strong>, meaning if we simulate the variable many times, it is the <strong>long-run average of the simulated values</strong>.</p>
<section id="example-1-coin-toss" class="level4">
<h4 class="anchored" data-anchor-id="example-1-coin-toss">Example 1: Coin Toss</h4>
<p>Going back to our coin toss example, we define a random variable <span class="math inline">\(X\)</span> as: <span class="math display">\[X = \begin{cases}
      1, \text{if the coin lands heads} \\
      0, \text{if the coin lands tails}
   \end{cases}\]</span></p>
<p>We can calculate its expectation <span class="math inline">\(\mathbb{E}[X]\)</span> using the second method of applying the weights one possible value at a time: <span class="math display">\[\begin{align}
\mathbb{E}[X] &amp;= \sum_{x} x P(X=x) \\
&amp;= 1 * 0.5 + 0 * 0.5 \\
&amp;= 0.5
\end{align}\]</span></p>
<p>Note that <span class="math inline">\(\mathbb{E}[X] = 0.5\)</span> is not a possible value of <span class="math inline">\(X\)</span>; it’s an average. <strong>The expectation of X does not need to be a possible value of X</strong>.</p>
</section>
<section id="example-2" class="level4">
<h4 class="anchored" data-anchor-id="example-2">Example 2</h4>
<p>Consider the random variable <span class="math inline">\(X\)</span>:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><span class="math inline">\(x\)</span></th>
<th><span class="math inline">\(P(X=x)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>3</td>
<td>0.1</td>
</tr>
<tr class="even">
<td>4</td>
<td>0.2</td>
</tr>
<tr class="odd">
<td>6</td>
<td>0.4</td>
</tr>
<tr class="even">
<td>8</td>
<td>0.3</td>
</tr>
</tbody>
</table>
<p>To calculate it’s expectation, <span class="math display">\[\begin{align}
\mathbb{E}[X] &amp;= \sum_{x} x P(X=x) \\
&amp;= 3 * 0.1 + 4 * 0.2 + 6 * 0.4 + 8 * 0.3 \\
&amp;= 0.3 + 0.8 + 2.4 + 2.4 \\
&amp;= 5.9
\end{align}\]</span></p>
<p>Again, note that <span class="math inline">\(\mathbb{E}[X] = 5.9\)</span> is not a possible value of <span class="math inline">\(X\)</span>; it’s an average. <strong>The expectation of X does not need to be a possible value of X</strong>.</p>
</section>
</section>
<section id="variance" class="level3">
<h3 class="anchored" data-anchor-id="variance">Variance</h3>
<p>The <strong>variance</strong> of a random variable is a measure of its chance error. It is defined as the <strong>expected squared deviation from the expectation</strong> of <span class="math inline">\(X\)</span>. Put more simply, variance asks: how far does <span class="math inline">\(X\)</span> typically vary from its average value, just by chance? What is the spread of <span class="math inline">\(X\)</span>’s distribution?</p>
<p><span class="math display">\[\text{Var}(X) = \mathbb{E}[(X-\mathbb{E}[X])^2]\]</span></p>
<p>The units of variance are the square of the units of <span class="math inline">\(X\)</span>. To get it back to the right scale, use the standard deviation of <span class="math inline">\(X\)</span>: <span class="math display">\[\text{SD}(X) = \sqrt{\text{Var}(X)}\]</span></p>
<p>Like with expectation, <strong>variance and standard deviation are numbers, not random variables</strong>! Variance helps us describe the <strong>variability</strong> of a random variable. It is the <strong>expected squared error</strong> between the <strong>random variable</strong> and its <strong>expected value</strong>. As you will see shortly, we can use variance to help us quantify the <strong>chance error</strong> that arises when using a sample <span class="math inline">\(X\)</span> to estimate the <strong>population mean</strong>.</p>
<p>By <a href="https://www.inferentialthinking.com/chapters/14/2/Variability.html#Chebychev's-Bounds">Chebyshev’s inequality</a>, which you saw in Data 8, no matter what the shape of the distribution of <span class="math inline">\(X\)</span> is, the vast majority of the probability lies in the interval “expectation plus or minus a few SDs.”</p>
<p>If we expand the square and use properties of expectation, we can re-express variance as the <strong>computational formula for variance</strong>.</p>
<p><span class="math display">\[\text{Var}(X) = \mathbb{E}[X^2] - (\mathbb{E}[X])^2\]</span></p>
<p>This form is often more convenient to use when computing the variance of a variable by hand, and it is also useful in Mean Squared Error calculations, as <span class="math inline">\(\mathbb{E}[X^2] = \text{Var}(X)\)</span> if <span class="math inline">\(X\)</span> is centered and <span class="math inline">\(E(X)=0\)</span>.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Proof
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span class="math display">\[\begin{align}
   \text{Var}(X) &amp;= \mathbb{E}[(X-\mathbb{E}[X])^2] \\
   &amp;= \mathbb{E}[X^2 - 2\mathbb{E}[X]X + \mathbb{E}[X]^2] \\
   &amp;= \mathbb{E}[X^2] - 2 \mathbb{E}[X]\mathbb{E}[X] + \mathbb{E}(X)^2\\
   &amp;= \mathbb{E}[X^2] - (\mathbb{E}[X])^2
\end{align}\]</span></p>
</div>
</div>
</div>
<p>How do we compute <span class="math inline">\(\mathbb{E}[X^2]\)</span>? Any function of a random variable is <em>also</em> a random variable. That means that by squaring <span class="math inline">\(X\)</span>, we’ve created a new random variable. To compute <span class="math inline">\(\mathbb{E}[X^2]\)</span>, we can simply apply our definition of expectation to the random variable <span class="math inline">\(X^2\)</span>.</p>
<p><span class="math display">\[\mathbb{E}[X^2] = \sum_{x} x^2 P(X = x)\]</span></p>
</section>
<section id="example-die" class="level3">
<h3 class="anchored" data-anchor-id="example-die">Example: Die</h3>
<p>Let <span class="math inline">\(X\)</span> be the outcome of a single fair die roll. <span class="math inline">\(X\)</span> is a random variable defined as <span class="math display">\[X = \begin{cases}
      \frac{1}{6}, \text{if } x \in \{1,2,3,4,5,6\} \\
      0, \text{otherwise}
   \end{cases}\]</span></p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Caution</span>What’s the expectation, <span class="math inline">\(\mathbb{E}[X]?\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span class="math display">\[ \begin{align}
         \mathbb{E}[X] &amp;= 1\big(\frac{1}{6}\big) + 2\big(\frac{1}{6}\big) + 3\big(\frac{1}{6}\big) + 4\big(\frac{1}{6}\big) + 5\big(\frac{1}{6}\big) + 6\big(\frac{1}{6}\big) \\
         &amp;= \big(\frac{1}{6}\big)( 1 + 2 + 3 + 4 + 5 + 6) \\
         &amp;= \frac{7}{2}
      \end{align}\]</span></p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Caution</span>What’s the variance, <span class="math inline">\(\text{Var}(X)?\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Using Approach 1 (definition): <span class="math display">\[\begin{align}
      \text{Var}(X) &amp;= \big(\frac{1}{6}\big)((1 - \frac{7}{2})^2 + (2 - \frac{7}{2})^2 + (3 - \frac{7}{2})^2 + (4 - \frac{7}{2})^2 + (5 - \frac{7}{2})^2 + (6 - \frac{7}{2})^2) \\
      &amp;= \frac{35}{12}
   \end{align}\]</span></p>
<p>Using Approach 2 (property): <span class="math display">\[\mathbb{E}[X^2] = \sum_{x} x^2 P(X = x) = \frac{91}{6}\]</span> <span class="math display">\[\text{Var}(X) = \frac{91}{6} - (\frac{7}{2})^2 = \frac{35}{12}\]</span></p>
</div>
</div>
</div>
<p>We can summarize our discussion so far in the following diagram. Below are different ways to describe a random variable.</p>
<p align="center">
<img src="images/exp_var_new.png" alt="A variable can be summarized by descriptions like a probability distribution or a histogram of sampled samples. It can also be summarized by properities like expectation, variance, skewness, kurtosis, and more." width="800">
</p>
</section>
</section>
<section id="sums-of-random-variables" class="level2">
<h2 class="anchored" data-anchor-id="sums-of-random-variables">Sums of Random Variables</h2>
<p>Often, we will work with multiple random variables at the same time. <strong>A function of a random variable is also a random variable.</strong> If you create multiple random variables based on your sample, then functions of those random variables are also random variables.</p>
<p>For example, if <span class="math inline">\(X_1, X_2, ..., X_n\)</span> are random variables, then so are all of these:</p>
<ul>
<li><span class="math inline">\(X_n^2\)</span></li>
<li><span class="math inline">\(\#\{i : X_i &gt; 10\}\)</span></li>
<li><span class="math inline">\(\text{max}(X_1, X_2, ..., X_n)\)</span></li>
<li><span class="math inline">\(\frac{1}{n} \sum_{i=1}^n (X_i - c)^2\)</span></li>
<li><span class="math inline">\(\frac{1}{n} \sum_{i=1}^n X_i\)</span></li>
</ul>
<p>Many functions of random variables that we are interested in (e.g., counts, means) involve sums of random variables, so let’s dive deeper into the properties of sums of random variables.</p>
<section id="properties-of-expectation" class="level3">
<h3 class="anchored" data-anchor-id="properties-of-expectation">Properties of Expectation</h3>
<p>Instead of simulating full distributions, we often just compute expectation and variance directly. Recall the definition of expectation: <span class="math display">\[\mathbb{E}[X] = \sum_{\text{all possible}\ x} x P(X=x)\]</span></p>
<p>From it, we can derive some useful properties:</p>
<ol type="1">
<li><strong>Linearity of expectation</strong>. The expectation of the linear transformation <span class="math inline">\(aX+b\)</span>, where <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> are constants, is:</li>
</ol>
<p><span class="math display">\[\mathbb{E}[aX+b] = aE[\mathbb{X}] + b\]</span></p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Proof
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span class="math display">\[\begin{align}
        \mathbb{E}[aX+b] &amp;= \sum_{x} (ax + b) P(X=x) \\
        &amp;= \sum_{x} (ax P(X=x) + bP(X=x)) \\
        &amp;= a\sum_{x}P(X=x) + b\sum_{x}P(X=x)\\
        &amp;= a\mathbb{E}(X) + b * 1
\end{align}\]</span></p>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Expectation is also linear in <em>sums</em> of random variables.</li>
</ol>
<p><span class="math display">\[\mathbb{E}[X+Y] = \mathbb{E}[X] + \mathbb{E}[Y]\]</span></p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Proof
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span class="math display">\[\begin{align}
    \mathbb{E}[X+Y] &amp;= \sum_{s} (X+Y)(s) P(s) \\
    &amp;= \sum_{s} (X(s)P(s) + Y(s)P(s)) \\
    &amp;= \sum_{s} X(s)P(s) + \sum_{s} Y(s)P(s)\\
    &amp;= \mathbb{E}[X] + \mathbb{E}[Y]
\end{align}\]</span></p>
</div>
</div>
</div>
<ol start="3" type="1">
<li>If <span class="math inline">\(g\)</span> is a non-linear function, then in general, <span class="math display">\[\mathbb{E}[g(X)] \neq g(\mathbb{E}[X])\]</span></li>
</ol>
<p>For example, if <span class="math inline">\(X\)</span> is -1 or 1 with equal probability, then <span class="math inline">\(\mathbb{E}[X] = 0\)</span>, but <span class="math inline">\(\mathbb{E}[X^2] = 1 \neq 0\)</span>.</p>
<p>Using these properties, we can again better understand how we got from the original definition of variance to the computational definition.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Proof
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p><span class="math display">\[\begin{align}
   \text{Var}(X) &amp;= \mathbb{E}[(X-\textcolor{blue}{\mathbb{E}[X]})^2] \hspace{2em} \text{Constants inside expectations are colored \textcolor{blue}{blue}} \\
   &amp;= \mathbb{E}[X^2 - \textcolor{blue}{2\mathbb{E}[X]}X + \textcolor{blue}{\mathbb{E}[X]}^2] \hspace{2em} \text{Expanding the square}\\
   &amp;= \mathbb{E}[X^2] - \mathbb{E}[\textcolor{blue}{2\mathbb{E}[X]}X] +\mathbb{E}[\textcolor{blue}{\mathbb{E}[X]}^2] \hspace{2em} \text{by Property 2}\\
   &amp;= \mathbb{E}[X^2] - 2 \mathbb{E}[X]\mathbb{E}[X] +\mathbb{E}[X]^2 \hspace{2em} \text{by Property 1}\\
   &amp;= \mathbb{E}[X^2] - 2 \mathbb{E}[X]^2 +\mathbb{E}[X]^2 \hspace{2em} \text{Algebra}\\
   &amp;= \mathbb{E}[X^2] - (\mathbb{E}[X])^2
\end{align}\]</span></p>
</div>
</div>
</div>
</section>
<section id="properties-of-variance" class="level3">
<h3 class="anchored" data-anchor-id="properties-of-variance">Properties of Variance</h3>
<p>Let’s now get into the properties of variance. Recall the definition of variance: <span class="math display">\[\text{Var}(X) = \mathbb{E}[(X-\mathbb{E}[X])^2]\]</span></p>
<p>Combining it with the properties of expectation, we can derive some useful properties:</p>
<ol type="1">
<li>Unlike expectation, variance is <em>non-linear</em>. The variance of the linear transformation <span class="math inline">\(aX+b\)</span> is: <span class="math display">\[\text{Var}(aX+b) = a^2 \text{Var}(X)\]</span></li>
</ol>
<ul>
<li>Subsequently, <span class="math display">\[\text{SD}(aX+b) = |a| \text{SD}(X)\]</span></li>
<li>The full proof of this fact can be found using the definition of variance. As general intuition, consider that <span class="math inline">\(aX+b\)</span> scales the variable <span class="math inline">\(X\)</span> by a factor of <span class="math inline">\(a\)</span>, then shifts the distribution of <span class="math inline">\(X\)</span> by <span class="math inline">\(b\)</span> units.</li>
</ul>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Proof
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We know that <span class="math display">\[\mathbb{E}[aX+b] = aE[\mathbb{X}] + b\]</span></p>
<p>In order to compute <span class="math inline">\(\text{Var}(aX+b)\)</span>, consider that a shift by <span class="math inline">\(b\)</span> units does not affect spread, so <span class="math inline">\(\text{Var}(aX+b) = \text{Var}(aX)\)</span>.</p>
<p>Then, <span class="math display">\[\begin{align}
    \text{Var}(aX+b) &amp;= \text{Var}(aX) \\
    &amp;= \mathbb{E}[(aX)^2] - (\mathbb{E}[aX])^2 \\
    &amp;= \mathbb{E}[a^2 X^2] - (a\mathbb{E}[X])^2\\
    &amp;= a^2 (\mathbb{E}[X^2] - (\mathbb{E}[X])^2) \\
    &amp;= a^2 \text{Var}(X)
\end{align}\]</span></p>
</div>
</div>
</div>
<ul>
<li>Shifting the distribution by <span class="math inline">\(b\)</span> <em>does not</em> impact the <em>spread</em> of the distribution. Thus, <span class="math inline">\(\text{Var}(aX+b) = \text{Var}(aX)\)</span>.</li>
<li>Scaling the distribution by <span class="math inline">\(a\)</span> <em>does</em> impact the spread of the distribution.</li>
</ul>
<p align="center">
<img src="images/transformation.png" alt="Three illustrations. First, the distribution of X. Then the distribution of 3X that is 3 times wider than the first. And then the distribution of 3X+5 that is now shifted to the right of the other two distributions." width="600">
</p>
<ol start="2" type="1">
<li>Variance of sums of random variables is affected by the (in)dependence of the random variables. <span class="math display">\[\text{Var}(X + Y) = \text{Var}(X) + \text{Var}(Y) + 2\text{Cov}(X,Y)\]</span> <span class="math display">\[\text{Var}(X + Y) = \text{Var}(X) + \text{Var}(Y) \qquad \text{if } X, Y \text{ independent}\]</span></li>
</ol>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Proof
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The variance of a sum is affected by the dependence between the two random variables that are being added. Let’s expand the definition of <span class="math inline">\(\text{Var}(X + Y)\)</span> to see what’s going on.</p>
<p>To simplify the math, let <span class="math inline">\(\mu_x = \mathbb{E}[X]\)</span> and <span class="math inline">\(\mu_y = \mathbb{E}[Y]\)</span>.</p>
<p><span class="math display">\[ \begin{align}
\text{Var}(X + Y) &amp;= \mathbb{E}[(X+Y- \mathbb{E}(X+Y))^2] \\
&amp;= \mathbb{E}[((X - \mu_x) + (Y - \mu_y))^2] \\
&amp;= \mathbb{E}[(X - \mu_x)^2 + 2(X - \mu_x)(Y - \mu_y) + (Y - \mu_y)^2] \\
&amp;= \mathbb{E}[(X - \mu_x)^2] + \mathbb{E}[(Y - \mu_y)^2] + 2\mathbb{E}[(X - \mu_x)(Y - \mu_y)] \\
&amp;= \text{Var}(X) + \text{Var}(Y) + 2\mathbb{E}[(X - \mu_x)(Y - \mu_y)] \\
&amp;= \text{Var}(X) + \text{Var}(Y) + 2\text{Cov}(X,Y)
\end{align}\]</span></p>
</div>
</div>
</div>
</section>
<section id="example-two-dice" class="level3">
<h3 class="anchored" data-anchor-id="example-two-dice">Example: Two Dice</h3>
<p>Let <span class="math inline">\(X_1\)</span> and <span class="math inline">\(X_2\)</span> be numbers on two dice rolls. Assume <span class="math inline">\(X_1, X_2\)</span> are i.i.d.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Is the expectation of $2X_1$ and $X_1 + X_2$ the same?">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Is the expectation of <span class="math inline">\(2X_1\)</span> and <span class="math inline">\(X_1 + X_2\)</span> the same?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Yes. <span class="math display">\[\mathbb{E}(2X_1) = 2\mathbb{E}(X_1) = 2*3.5 = 7\]</span></p>
<p><span class="math display">\[\mathbb{E}(X_1 + X_2) = \mathbb{E}(X_1) + \mathbb{E}(X_2) = 3.5 + 3.5 = 7\]</span></p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="Is the variance of $2X_1$ and $X_1 + X_2$ the same?">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Is the variance of <span class="math inline">\(2X_1\)</span> and <span class="math inline">\(X_1 + X_2\)</span> the same?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>No.&nbsp;Note that <span class="math inline">\(2X_1\)</span> is twice the value of the first die, which is <em>different</em> from summing the values of two dice.</p>
<p><span class="math display">\[ \text{Var}(2X_1) = 2^2\text{Var}(X) = 4\text{Var}(X_1)\]</span></p>
<p><span class="math display">\[ \text{Var}(X_1 + X_2) = \text{Var}(X_1) + \text{Var}(X_2) + \text{Cov}(X_1, X_2) = 2\text{Var}(X_1)\]</span></p>
<p>Note that <span class="math inline">\(\text{Var}(X_1) = \text{Var}(X_2)\)</span>, and <span class="math inline">\(\text{Cov}(X_1, X_2) = 0\)</span> since <span class="math inline">\(X_1, X_2\)</span> are independent.</p>
</div>
</div>
</div>
</section>
<section id="covariance-and-correlation" class="level3">
<h3 class="anchored" data-anchor-id="covariance-and-correlation">Covariance and Correlation</h3>
<p>We define the <strong>covariance</strong> of two random variables as the expected product of deviations from expectation. Put more simply, covariance is a generalization of variance to variance:</p>
<p><span class="math display">\[\text{Cov}(X, X) = \mathbb{E}[(X - \mathbb{E}[X])^2] = \text{Var}(X)\]</span></p>
<p><span class="math display">\[\text{Cov}(X, Y) = \mathbb{E}[(X - \mathbb{E}[X])(Y - \mathbb{E}[Y])]\]</span></p>
<p>We can treat the covariance as a measure of association. Remember the definition of correlation given when we first established SLR?</p>
<p><span class="math display">\[r(X, Y) = \mathbb{E}\left[\left(\frac{X-\mathbb{E}[X]}{\text{SD}(X)}\right)\left(\frac{Y-\mathbb{E}[Y]}{\text{SD}(Y)}\right)\right] = \frac{\text{Cov}(X, Y)}{\text{SD}(X)\text{SD}(Y)}\]</span></p>
<p>It turns out we’ve been quietly using covariance for some time now! Correlation (and therefore covariance) measures a linear relationship between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>.</p>
<ul>
<li>If <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are correlated, then knowing <span class="math inline">\(X\)</span> tells you something about <span class="math inline">\(Y\)</span>.</li>
<li>“<span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are uncorrelated” is the same as “Correlation and covariance equal to 0”</li>
<li><strong>Independent <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are uncorrelated</strong>, or in other words <span class="math inline">\(\text{Cov}(X, Y) =0\)</span> and <span class="math inline">\(r(X, Y) = 0\)</span>, because knowing <span class="math inline">\(X\)</span> tells you nothing about <span class="math inline">\(Y\)</span></li>
<li>Note, however, that the converse is not always true: <strong><span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> could be uncorrelated</strong> (having <span class="math inline">\(\text{Cov}(X, Y) = r(X, Y) = 0\)</span>) <strong>but not be independent</strong>.</li>
</ul>
</section>
<section id="equal-vs.-identically-distributed-vs.-i.i.d" class="level3">
<h3 class="anchored" data-anchor-id="equal-vs.-identically-distributed-vs.-i.i.d">Equal vs.&nbsp;Identically Distributed vs.&nbsp;i.i.d</h3>
<p>Suppose that we have two random variables <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>:</p>
<ul>
<li><span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are <strong>equal</strong> if <span class="math inline">\(X(s) = Y(s)\)</span> for every sample <span class="math inline">\(s\)</span>. Regardless of the exact sample drawn, <span class="math inline">\(X\)</span> is always equal to <span class="math inline">\(Y\)</span>.</li>
<li><span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are <strong>identically distributed</strong> if the distribution of <span class="math inline">\(X\)</span> is equal to the distribution of <span class="math inline">\(Y\)</span>. We say “<span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are equal in distribution.” That is, <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> take on the same set of possible values, and each of these possible values is taken with the same probability. On any specific sample <span class="math inline">\(s\)</span>, identically distributed variables do <em>not</em> necessarily share the same value. If <span class="math inline">\(X = Y\)</span>, then <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are identically distributed; however, the converse is not true (ex: <span class="math inline">\(Y = 7 - X\)</span>, <span class="math inline">\(X\)</span> is a die)</li>
<li><span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are <strong>independent and identically distributed (i.i.d)</strong> if
<ol type="1">
<li>The variables are identically distributed.</li>
<li>Knowing the outcome of one variable does not influence our belief of the outcome of the other.</li>
</ol></li>
</ul>
<p>Note that in Data 100, you’ll never be expected to prove that random variables are i.i.d.</p>
<p>Now let’s walk through an example. Say <span class="math inline">\(X_1\)</span> and <span class="math inline">\(X_2\)</span> be numbers on rolls of two fair die. <span class="math inline">\(X_1\)</span> and <span class="math inline">\(X_2\)</span> are i.i.d, so <span class="math inline">\(X_1\)</span> and <span class="math inline">\(X_2\)</span> have the same distribution. However, the sums <span class="math inline">\(Y = X_1 + X_1 = 2X_1\)</span> and <span class="math inline">\(Z=X_1+X_2\)</span> have different distributions but the same expectation (7).</p>
<p align="center">
<img src="images/yz_distribution.png" alt="Distributions of Y and Z." width="=500">
</p>
<p>However, looking at the graphs and running this through simulation, we can see that the left distribution (<span class="math inline">\(Y = 2X_1\)</span>) has a larger variance.</p>
<p align="center">
<img src="images/yz.png" alt="Y and Z have the same expectation, but Y has a greater variance and standard deviation." width="200">
</p>
</section>
<section id="summary" class="level3">
<h3 class="anchored" data-anchor-id="summary">Summary</h3>
<ul>
<li>Let <span class="math inline">\(X\)</span> be a random variable with distribution <span class="math inline">\(P(X=x)\)</span>.
<ul>
<li><span class="math inline">\(\mathbb{E}[X] = \sum_{x} x P(X=x)\)</span></li>
<li><span class="math inline">\(\text{Var}(X) = \mathbb{E}[(X-\mathbb{E}[X])^2] = \mathbb{E}[X^2] - (\mathbb{E}[X])^2\)</span></li>
</ul></li>
<li>Let <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> be scalar values.
<ul>
<li><span class="math inline">\(\mathbb{E}[aX+b] = aE[\mathbb{X}] + b\)</span></li>
<li><span class="math inline">\(\text{Var}(aX+b) = a^2 \text{Var}(X)\)</span></li>
</ul></li>
<li>Let <span class="math inline">\(Y\)</span> be another random variable.
<ul>
<li><span class="math inline">\(\mathbb{E}[X+Y] = \mathbb{E}[X] + \mathbb{E}[Y]\)</span></li>
<li><span class="math inline">\(\text{Var}(X + Y) = \text{Var}(X) + \text{Var}(Y) + 2\text{Cov}(X,Y)\)</span></li>
</ul></li>
</ul>
<p>Note that <span class="math inline">\(\text{Cov}(X,Y)\)</span> would equal 0 if <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are independent.</p>


</section>
</section>

</main> <!-- /main -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
    // 1. Select the specific parent div within the callout header that has the 
    //    collapse attributes (data-bs-toggle).
    var calloutToggles = document.querySelectorAll(
        '.callout-header[data-bs-toggle="collapse"]'
    );

    calloutToggles.forEach(function(toggle) {
        // 2. Force the ARIA role to be 'button'
        // This is crucial because a 'div' is not allowed to use aria-expanded.
        toggle.setAttribute('role', 'button');
        
        // 3. Ensure it is keyboard-focusable (critical accessibility fix)
        if (toggle.getAttribute('tabindex') === null) {
             toggle.setAttribute('tabindex', '0');
        }
    });

    // Scrollable Region Accessibility Fix:
    const selectors = '.cell-output-display, .cell-output, pre, code';
    
    const fixScrollability = () => {
        const regions = document.querySelectorAll(selectors);
        regions.forEach(el => {
            const hasHorizontalScroll = el.scrollWidth > el.clientWidth;
            const hasVerticalScroll = el.scrollHeight > el.clientHeight;

            if (hasHorizontalScroll || hasVerticalScroll) {
                if (!el.hasAttribute('tabindex')) {
                    el.setAttribute('tabindex', '0');
                    // Add a label so screen readers explain why this is focusable
                    el.setAttribute('aria-label', 'Scrollable content');
                }
            }
        });
    };

    // Run once on load
    fixScrollability();

    // Run again if the window is resized (which might trigger scrollbars)
    window.addEventListener('resize', fixScrollability);
});
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ds100\.org\/course-notes\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>